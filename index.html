<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>æŠ½å¥–é¡µé¢</title>
    <style>
      /* å…¨å±€æ ·å¼é‡ç½® */
      * {
        margin: 0;
        padding: 0;
      }

      /* æŠ½å¥–å®¹å™¨æ ·å¼ */
      .box {
        background-color: lightgray;
        width: 340px;
        height: 340px;
        position: relative;
      }

      /* å¥–å“æ–¹å—æ ·å¼ */
      .box div {
        background-color: cadetblue;
        width: 100px;
        height: 100px;
        text-align: center;
        line-height: 100px;
      }

      /* å„ä¸ªå¥–å“æ–¹å—å®šä½æ ·å¼ */
      .div1 {
        position: absolute;
        top: 10px;
        left: 10px;
      }

      .div2 {
        position: absolute;
        top: 10px;
        left: 120px;
      }

      .div3 {
        position: absolute;
        top: 10px;
        left: 230px;
      }

      .div4 {
        position: absolute;
        top: 120px;
        left: 230px;
      }

      .div5 {
        position: absolute;
        top: 230px;
        left: 230px;
      }

      .div6 {
        position: absolute;
        top: 230px;
        left: 120px;
      }

      .div7 {
        position: absolute;
        top: 230px;
        left: 10px;
      }

      .div8 {
        position: absolute;
        top: 120px;
        left: 10px;
      }

      /* æŠ½å¥–æŒ‰é’®æ ·å¼ */
      .giftButton {
        position: absolute;
        width: 100px;
        height: 100px;
        top: 120px;
        left: 120px;
        border-radius: 10px;
        background-color: navajowhite;
      }

      #bigAlert {
        display: flex;
        position: fixed;
        /* z-index: 1; */
        /* left: 0; */
        top: 0;
        width: 100%;
        height: 100%;
        /* overflow: auto; */
        background-color: rgba(0, 0, 0, 0.4);
        align-content: center;
      }

      .alertContent {
        display: flex;
        justify-content: space-around;
        align-items: center;
        background-color: white;
        border-radius: 10px;
        /* margin: 15%; */
        /* padding: 20px; */
        /* border: 1px solid #888; */
        width: 300px;
        height: 100px;
        /* margin-left: auto;
				margin-right: auto; */
        margin: auto;
      }

      .buttonAlert {
        padding: 10px;
        color: black;
        background-color: gold;
        border: none;
        border-radius: 10px;
        cursor: pointer;
      }

      .buttonAlert:hover {
        background-color: #609ea0;
        color: blue;
        transition: 0.3s ease;
      }

      .mengban {
        background-color: rgba(0, 0, 0, 0.5);
        width: 100%;
        height: 100%;
        /* z-index: 2; */
        position: absolute;
        top: 0px;
        left: 0px;
        border-radius: 8px;
      }
    </style>
  </head>

  <body>
    <div class="box">
      <div class="div1">ç”µè„‘</div>
      <div class="div2">æ‰‹æœº</div>
      <div class="div3">éŸ³å“</div>
      <div class="div4">å†°ç®±</div>
      <div class="div5">ç©ºè°ƒ</div>
      <div class="div6">è¡£æŸœ</div>
      <div class="div7">æ²™å‘</div>
      <div class="div8">åœ°æ¯¯</div>
      <button class="giftButton">
        <span class="mengban" style="display: none" readonly></span>
        å¼€å§‹æŠ½å¥–
      </button>
    </div>

    <div id="bigAlert" style="display: none">
      <div class="alertContent">
        <span id="alertMessage"></span>
        <button class="buttonAlert" onclick="closeAlert()">ç¡®å®š</button>
      </div>
    </div>

    <script>
      // æ˜¾ç¤ºå¼¹çª—çš„
      function showAlert(a) {
        //å…ˆè·å–åˆ°å¤§çš„div
        let alertDiv = document.getElementById('bigAlert');
        //åœ¨è·å–spanæ ‡ç­¾
        let messageSpan = document.getElementById('alertMessage');
        // ä¼ å‚(ä¸­å¥–æç¤º)
        // messageSpan.innerHTML = `<span style="color: red;">${a}</span>`;;
        //ä¸­å¥–æç¤ºï¼ˆæ¨¡æ¿å­—ç¬¦ä¸²ï¼‰
        let startIndex = a.indexOf('ä¸­å¥–çš„æ˜¯') + 'ä¸­å¥–çš„æ˜¯'.length;
        let highlightedPart = a.slice(startIndex);
        messageSpan.innerHTML = `
				        <span>
				            ${a.slice(0, startIndex)}
				            <span style="color: red; font-weight: bold;">${highlightedPart}</span>
				        </span>
				    `;
        //ä¸Šé¢éšè—äº† ç°åœ¨åœ¨æ˜¾ç¤ºå‡ºæ¥
        alertDiv.style.display = 'block';
      }

      // showAlert('aaaaaaaaaaaa'); // æµ‹è¯•å¼¹å±‚

      //å…³é—­å¼¹çª—çš„
      function closeAlert() {
        //è·å–åˆ°å¤§div
        let alertDiv = document.getElementById('bigAlert');
        //éšè—
        alertDiv.style.display = 'none';
      }

      // è·å–box
      let boxCenter = document.getElementsByClassName('box')[0];
      // è·å–boxcenteré‡Œçš„æ‰€æœ‰çš„divå…ƒç´ 
      let allGift = boxCenter.getElementsByTagName('div');
      // è·å–åˆ°æŠ½å¥–æŒ‰é’®ï¼Œåç»­ç»‘å®šç‚¹å‡»äº‹ä»¶
      let giftButtons = document.getElementsByClassName('giftButton')[0];

      // å……å½“æ‰€æœ‰çš„å¥–å“çš„ä¸‹æ ‡
      let giftIndex = 0;
      // æ—‹è½¬æ—¶é—´é—´éš”
      let time = 200;
      // å­˜å®šæ—¶å™¨çš„
      let inter;
      // æœ¬æ¬¡æŠ½å¥–çš„éšæœºåœˆæ•°
      let countTotal;

      let mengban = document.getElementsByClassName('mengban')[0];

      //é—ªåŠ¨æ¬¡æ•°
      let bulingBuling = 0;
      // ç‚¹å‡»äº‹ä»¶
      giftButtons.onclick = function () {
        bulingBuling = 0;
        // åœ¨æ•° 11-20 æ ¼ä¹‹é—´ ã€‚éšæœºç”Ÿæˆæ ¼æ•°
        countTotal = Math.floor(Math.random() * 10 + 1) + 10;
        console.log(countTotal, 'é—ªçƒæ¬¡æ•°----');

        // è®¾å®šæ—¶å™¨
        inter = setInterval(autoScroll, time);
        //è’™ç‰ˆæ˜¾ç¤ºã€‚æ ‡ç­¾ä¸Šéšè—äº†
        mengban.style.display = 'block';
        //æ¸…é™¤ç‚¹å‡»äº‹ä»¶ ï¼Œä¸ºäº†æŠ½å¥–çš„æ—¶å€™ä¸èƒ½å†ç‚¹æŠ½å¥–æŒ‰é’®
        giftButtons.onclick = null;
      };
      //è¿™ä¸ªå‡½æ•°ä¼šåœ¨å®šæ—¶å™¨å†…è¢«åå¤è°ƒç”¨
      function autoScroll() {
        //æ¯æ¬¡è¢«è°ƒç”¨è¿™ä¸ªå‡½æ•° é—ªåŠ¨æ¬¡æ•°+1
        bulingBuling++;
        console.log(bulingBuling);

        // éšæœºé€‰æ‹©ä¸‹ä¸€ä¸ªè¦å˜è‰²æ˜¾ç¤ºçš„å¥–å“ç´¢å¼•ï¼ˆä¸æŒ‰ç…§é¡ºåºï¼‰
        let nextIndex;
        nextIndex = Math.floor(Math.random() * allGift.length);
        // å¾ªç¯æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´  è®©ä»–ä»¬é¢œè‰²ç»Ÿä¸€
        for (let i = 0; i < allGift.length; i++) {
          allGift[i].style.backgroundColor = 'cadetblue';
        }
        // æŠŠ å…¨éƒ¨div ä¸­æŒ‘å‡ºæ¥çš„éšæœºç´¢å¼•ä¸‹æ ‡å˜é»„
        allGift[nextIndex].style.backgroundColor = 'yellow';
        // åˆ¤æ–­é—ªçš„æ ¼ï¼Œæ˜¯å¦ç­‰äºä¸Šé¢è¦æ±‚çš„æ ¼æ•°
        if (bulingBuling == countTotal) {
          mengban.style.display = 'none';
          //æ»¡è¶³å°±æ¸…é™¤å®šæ—¶å™¨
          clearInterval(inter);
          // æç¤ºç”¨æˆ·
          showAlert('ğŸ‰æ­å–œä½ ,ä¸­å¥–çš„æ˜¯ğŸ‰:' + ' ' + allGift[nextIndex].innerHTML);
          //========================é‡æ–°ç»‘å®šç‚¹å‡»äº‹ä»¶============================================
          giftButtons.onclick = function () {
            bulingBuling = 0;
            // åœ¨æ•°100-200æ ¼ä¹‹é—´ ã€‚éšæœºç”Ÿæˆæ ¼æ•°
            countTotal = Math.floor(Math.random() * 10 + 1) + 10;
            console.log(countTotal, 'é—ªçƒæ¬¡æ•°----');
            // è®¾å®šæ—¶å™¨
            inter = setInterval(autoScroll, time);
            mengban.style.display = 'block';
            giftButtons.onclick = null;
          };
        }
      }
    </script>
  </body>
</html>
